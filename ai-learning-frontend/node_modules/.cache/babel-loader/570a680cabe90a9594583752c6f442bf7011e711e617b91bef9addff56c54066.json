{"ast":null,"code":"import httpClient from './httpClient'; // Suppose que tu as déjà httpClient configuré\nimport { CONFIG } from '../config'; // Ta configuration\n\nexport const teacherService = {\n  // Récupérer le profil du professeur\n  getProfile: async userId => {\n    try {\n      const response = await httpClient.get(`/users/${userId}?populate=role,teacher_profile`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Erreur récupération profil teacher:', error);\n      throw error;\n    }\n  },\n  // Mettre à jour le profil\n  updateProfile: async profileData => {\n    try {\n      const user = JSON.parse(localStorage.getItem('user'));\n      const response = await httpClient.put(`/users/${user.id}`, {\n        ...profileData\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Erreur mise à jour profil:', error);\n      throw error;\n    }\n  },\n  // Récupérer les cours du professeur\n  getMyCourses: async teacherId => {\n    try {\n      const response = await httpClient.get('/courses', {\n        params: {\n          'filters[teacher][id][$eq]': teacherId,\n          'populate': '*'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Erreur récupération cours:', error);\n      throw error;\n    }\n  },\n  // Créer un nouveau cours\n  createCourse: async courseData => {\n    try {\n      const user = JSON.parse(localStorage.getItem('user'));\n      const response = await httpClient.post('/courses', {\n        data: {\n          ...courseData,\n          teacher: user.id,\n          published: true\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Erreur création cours:', error);\n      throw error;\n    }\n  },\n  // Uploader un fichier PDF\n  uploadFile: async file => {\n    try {\n      const formData = new FormData();\n      formData.append('files', file);\n      const response = await httpClient.post('/upload', formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Erreur upload fichier:', error);\n      throw error;\n    }\n  },\n  // Mettre à jour un cours existant\n  updateCourse: async (courseId, courseData) => {\n    try {\n      const response = await httpClient.put(`/courses/${courseId}`, {\n        data: courseData\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Erreur mise à jour cours:', error);\n      throw error;\n    }\n  },\n  // Supprimer un cours\n  deleteCourse: async courseId => {\n    try {\n      const response = await httpClient.delete(`/courses/${courseId}`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Erreur suppression cours:', error);\n      throw error;\n    }\n  },\n  // Récupérer les statistiques du professeur\n  getStats: async teacherId => {\n    try {\n      // Récupérer tous les cours du prof\n      const coursesResponse = await httpClient.get('/courses', {\n        params: {\n          'filters[teacher][id][$eq]': teacherId,\n          'populate': 'students'\n        }\n      });\n      const courses = coursesResponse.data.data || [];\n\n      // Calculer les statistiques\n      const totalCourses = courses.length;\n      const totalStudents = courses.reduce((sum, course) => {\n        var _course$attributes$st, _course$attributes$st2;\n        return sum + (((_course$attributes$st = course.attributes.students) === null || _course$attributes$st === void 0 ? void 0 : (_course$attributes$st2 = _course$attributes$st.data) === null || _course$attributes$st2 === void 0 ? void 0 : _course$attributes$st2.length) || 0);\n      }, 0);\n      const averageRating = courses.length > 0 ? courses.reduce((sum, course) => sum + (course.attributes.rating || 0), 0) / courses.length : 0;\n      return {\n        totalCourses,\n        totalStudents,\n        averageRating: averageRating.toFixed(1),\n        totalEarnings: `${(totalStudents * 29.99).toFixed(0)} €` // Exemple de calcul\n      };\n    } catch (error) {\n      console.error('❌ Erreur récupération stats:', error);\n      throw error;\n    }\n  }\n};\n\n// Service pour les étudiants\nexport const studentService = {\n  // Récupérer les cours disponibles\n  getAvailableCourses: async () => {\n    try {\n      const response = await httpClient.get('/courses', {\n        params: {\n          'filters[published][$eq]': true,\n          'populate': 'teacher,file'\n        }\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Erreur récupération cours disponibles:', error);\n      throw error;\n    }\n  },\n  // S'inscrire à un cours\n  enrollInCourse: async courseId => {\n    try {\n      const user = JSON.parse(localStorage.getItem('user'));\n      const response = await httpClient.post(`/courses/${courseId}/enroll`, {\n        studentId: user.id\n      });\n      return response.data;\n    } catch (error) {\n      console.error('❌ Erreur inscription cours:', error);\n      throw error;\n    }\n  },\n  // Récupérer les cours de l'étudiant\n  getMyEnrolledCourses: async studentId => {\n    try {\n      const response = await httpClient.get(`/users/${studentId}?populate=enrolled_courses`);\n      return response.data;\n    } catch (error) {\n      console.error('❌ Erreur récupération cours inscrits:', error);\n      throw error;\n    }\n  }\n};\nexport default {\n  teacherService,\n  studentService\n};","map":{"version":3,"names":["httpClient","CONFIG","teacherService","getProfile","userId","response","get","data","error","console","updateProfile","profileData","user","JSON","parse","localStorage","getItem","put","id","getMyCourses","teacherId","params","createCourse","courseData","post","teacher","published","uploadFile","file","formData","FormData","append","headers","updateCourse","courseId","deleteCourse","delete","getStats","coursesResponse","courses","totalCourses","length","totalStudents","reduce","sum","course","_course$attributes$st","_course$attributes$st2","attributes","students","averageRating","rating","toFixed","totalEarnings","studentService","getAvailableCourses","enrollInCourse","studentId","getMyEnrolledCourses"],"sources":["C:/Users/Admin/AI_Educative/ai-learning-frontend/src/api/api.js"],"sourcesContent":["import httpClient from './httpClient'; // Suppose que tu as déjà httpClient configuré\r\nimport { CONFIG } from '../config'; // Ta configuration\r\n\r\nexport const teacherService = {\r\n  // Récupérer le profil du professeur\r\n  getProfile: async (userId) => {\r\n    try {\r\n      const response = await httpClient.get(`/users/${userId}?populate=role,teacher_profile`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('❌ Erreur récupération profil teacher:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Mettre à jour le profil\r\n  updateProfile: async (profileData) => {\r\n    try {\r\n      const user = JSON.parse(localStorage.getItem('user'));\r\n      const response = await httpClient.put(`/users/${user.id}`, {\r\n        ...profileData\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('❌ Erreur mise à jour profil:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Récupérer les cours du professeur\r\n  getMyCourses: async (teacherId) => {\r\n    try {\r\n      const response = await httpClient.get('/courses', {\r\n        params: {\r\n          'filters[teacher][id][$eq]': teacherId,\r\n          'populate': '*'\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('❌ Erreur récupération cours:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Créer un nouveau cours\r\n  createCourse: async (courseData) => {\r\n    try {\r\n      const user = JSON.parse(localStorage.getItem('user'));\r\n      const response = await httpClient.post('/courses', {\r\n        data: {\r\n          ...courseData,\r\n          teacher: user.id,\r\n          published: true\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('❌ Erreur création cours:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Uploader un fichier PDF\r\n  uploadFile: async (file) => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append('files', file);\r\n\r\n      const response = await httpClient.post('/upload', formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data',\r\n        },\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('❌ Erreur upload fichier:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Mettre à jour un cours existant\r\n  updateCourse: async (courseId, courseData) => {\r\n    try {\r\n      const response = await httpClient.put(`/courses/${courseId}`, {\r\n        data: courseData\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('❌ Erreur mise à jour cours:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Supprimer un cours\r\n  deleteCourse: async (courseId) => {\r\n    try {\r\n      const response = await httpClient.delete(`/courses/${courseId}`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('❌ Erreur suppression cours:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Récupérer les statistiques du professeur\r\n  getStats: async (teacherId) => {\r\n    try {\r\n      // Récupérer tous les cours du prof\r\n      const coursesResponse = await httpClient.get('/courses', {\r\n        params: {\r\n          'filters[teacher][id][$eq]': teacherId,\r\n          'populate': 'students'\r\n        }\r\n      });\r\n\r\n      const courses = coursesResponse.data.data || [];\r\n      \r\n      // Calculer les statistiques\r\n      const totalCourses = courses.length;\r\n      const totalStudents = courses.reduce((sum, course) => {\r\n        return sum + (course.attributes.students?.data?.length || 0);\r\n      }, 0);\r\n      \r\n      const averageRating = courses.length > 0 \r\n        ? courses.reduce((sum, course) => sum + (course.attributes.rating || 0), 0) / courses.length\r\n        : 0;\r\n\r\n      return {\r\n        totalCourses,\r\n        totalStudents,\r\n        averageRating: averageRating.toFixed(1),\r\n        totalEarnings: `${(totalStudents * 29.99).toFixed(0)} €` // Exemple de calcul\r\n      };\r\n    } catch (error) {\r\n      console.error('❌ Erreur récupération stats:', error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\n// Service pour les étudiants\r\nexport const studentService = {\r\n  // Récupérer les cours disponibles\r\n  getAvailableCourses: async () => {\r\n    try {\r\n      const response = await httpClient.get('/courses', {\r\n        params: {\r\n          'filters[published][$eq]': true,\r\n          'populate': 'teacher,file'\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('❌ Erreur récupération cours disponibles:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // S'inscrire à un cours\r\n  enrollInCourse: async (courseId) => {\r\n    try {\r\n      const user = JSON.parse(localStorage.getItem('user'));\r\n      const response = await httpClient.post(`/courses/${courseId}/enroll`, {\r\n        studentId: user.id\r\n      });\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('❌ Erreur inscription cours:', error);\r\n      throw error;\r\n    }\r\n  },\r\n\r\n  // Récupérer les cours de l'étudiant\r\n  getMyEnrolledCourses: async (studentId) => {\r\n    try {\r\n      const response = await httpClient.get(`/users/${studentId}?populate=enrolled_courses`);\r\n      return response.data;\r\n    } catch (error) {\r\n      console.error('❌ Erreur récupération cours inscrits:', error);\r\n      throw error;\r\n    }\r\n  }\r\n};\r\n\r\nexport default {\r\n  teacherService,\r\n  studentService\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}